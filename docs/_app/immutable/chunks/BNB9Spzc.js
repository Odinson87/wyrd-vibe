import"./DsnmJJEf.js";import"./BkOl3Ci7.js";import{o as oe,e as U,s as ve}from"./DxeR3qBY.js";import{G as Y,B as N,a6 as ce,J as ae,C as de,A as _e,g as p,X as he,D as me,H as pe,F as Z,I as G,P as L,a7 as be,a8 as ge,K as W,M as Te,L as I,a9 as re,aa as ye,m as B,ab as $,ac as xe,N as te,O as Ee,ad as we,ae as K,af as le,ag as Ae,ah as Me,ai as Ne,aj as ke,ak as Ie,al as Se,V as Ce,am as De,an as Le,ao as He,ap as Oe,aq as Re,ar as Ve,u as O,as as qe,at as Be,p as Fe,l as Ue,e as Ye,f as F,z as Ge,a as R,i as Ke,c as V,b as q,w as Pe,a4 as Xe,r as H,s as P,h as ze}from"./BOCc00C_.js";import{p as Je,i as We}from"./ybYH4Tyt.js";import{s as Qe,c as Ze}from"./comCR5UD.js";import{i as $e}from"./Cr_UqD6e.js";import{w as je,g as ea,a as aa,t as ra,d as ta}from"./DD1q5Blc.js";function la(e,r){return r}function sa(e,r,a){for(var f=e.items,s=[],i=r.length,l=0;l<i;l++)ke(r[l].e,s,!0);var _=i>0&&s.length===0&&a!==null;if(_){var b=a.parentNode;Ie(b),b.append(a),f.clear(),M(e,r[0].prev,r[i-1].next)}Se(s,()=>{for(var h=0;h<i;h++){var g=r[h];_||(f.delete(g.k),M(e,g.prev,g.next)),le(g.e,!_)}})}function na(e,r,a,f,s,i=null){var l=e,_={flags:r,items:new Map,first:null};{var b=e;l=N?Y(ce(b)):b.appendChild(ae())}N&&de();var h=null,g=!1,w=new Map,n=he(()=>{var t=a();return ye(t)?t:t==null?[]:re(t)}),d,o;function v(){fa(o,d,_,w,l,s,r,f,a),i!==null&&(d.length===0?h?te(h):h=W(()=>i(l)):h!==null&&Ee(h,()=>{h=null}))}_e(()=>{o??=Ce,d=p(n);var t=d.length;if(g&&t===0)return;g=t===0;let T=!1;if(N){var A=me(l)===pe;A!==(t===0)&&(l=Z(),Y(l),G(!1),T=!0)}if(N){for(var u=null,m,c=0;c<t;c++){if(L.nodeType===be&&L.data===ge){l=L,T=!0,G(!1);break}var y=d[c],x=f(y,c);m=Q(L,_,u,null,y,x,c,s,r,a),_.items.set(x,m),u=m}t>0&&Y(Z())}if(N)t===0&&i&&(h=W(()=>i(l)));else if(Te()){var k=new Set,E=I;for(c=0;c<t;c+=1){y=d[c],x=f(y,c);var S=_.items.get(x)??w.get(x);S?se(S,y,c):(m=Q(null,_,null,null,y,x,c,s,r,a,!0),w.set(x,m)),k.add(x)}for(const[C,D]of _.items)k.has(C)||E.skipped_effects.add(D.e);E.add_callback(v)}else v();T&&G(!0),p(n)}),N&&(l=L)}function fa(e,r,a,f,s,i,l,_,b){var h=r.length,g=a.items,w=a.first,n=w,d,o=null,v=[],t=[],T,A,u,m;for(m=0;m<h;m+=1){if(T=r[m],A=_(T,m),u=g.get(A),u===void 0){var c=f.get(A);if(c!==void 0){f.delete(A),g.set(A,c);var y=o?o.next:n;M(a,o,c),M(a,c,y),X(c,y,s),o=c}else{var x=n?n.e.nodes_start:s;o=Q(x,a,o,o===null?a.first:o.next,T,A,m,i,l,b)}g.set(A,o),v=[],t=[],n=o.next;continue}if(se(u,T,m),(u.e.f&K)!==0&&te(u.e),u!==n){if(d!==void 0&&d.has(u)){if(v.length<t.length){var k=t[0],E;o=k.prev;var S=v[0],C=v[v.length-1];for(E=0;E<v.length;E+=1)X(v[E],k,s);for(E=0;E<t.length;E+=1)d.delete(t[E]);M(a,S.prev,C.next),M(a,o,S),M(a,C,k),n=k,o=C,m-=1,v=[],t=[]}else d.delete(u),X(u,n,s),M(a,u.prev,u.next),M(a,u,o===null?a.first:o.next),M(a,o,u),o=u;continue}for(v=[],t=[];n!==null&&n.k!==A;)(n.e.f&K)===0&&(d??=new Set).add(n),t.push(n),n=n.next;if(n===null)continue;u=n}v.push(u),o=u,n=u.next}if(n!==null||d!==void 0){for(var D=d===void 0?[]:re(d);n!==null;)(n.e.f&K)===0&&D.push(n),n=n.next;var fe=D.length;if(fe>0){var ie=h===0?s:null;sa(a,D,ie)}}e.first=a.first&&a.first.e,e.last=o&&o.e;for(var ue of f.values())le(ue.e);f.clear()}function se(e,r,a,f){xe(e.v,r),e.i=a}function Q(e,r,a,f,s,i,l,_,b,h,g){var w=(b&Ae)!==0,n=(b&Me)===0,d=w?n?B(s,!1,!1):$(s):s,o=(b&we)===0?l:$(l),v={i:o,v:d,k:i,a:null,e:null,prev:a,next:f};try{if(e===null){var t=document.createDocumentFragment();t.append(e=ae())}return v.e=W(()=>_(e,d,o,h),N),v.e.prev=a&&a.e,v.e.next=f&&f.e,a===null?g||(r.first=v):(a.next=v,a.e.next=v.e),f!==null&&(f.prev=v,f.e.prev=v.e),v}finally{}}function X(e,r,a){for(var f=e.next?e.next.e.nodes_start:a,s=r?r.e.nodes_start:a,i=e.e.nodes_start;i!==null&&i!==f;){var l=Ne(i);s.before(i),i=l}}function M(e,r,a){r===null?e.first=a:(r.next=a,r.e.next=a&&a.e),a!==null&&(a.prev=r,a.e.prev=r&&r.e)}const ia=Symbol("is custom element"),ua=Symbol("is html");function j(e){if(N){var r=!1,a=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var f=e.value;ee(e,"value",null),e.value=f}if(e.hasAttribute("checked")){var s=e.checked;ee(e,"checked",null),e.checked=s}}};e.__on_r=a,De(a),Le()}}function oa(e,r){var a=ne(e);a.checked!==(a.checked=r??void 0)&&(e.checked=r)}function ee(e,r,a,f){var s=ne(e);N&&(s[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||s[r]!==(s[r]=a)&&(r==="loading"&&(e[He]=a),e.removeAttribute(r))}function ne(e){return e.__attributes??={[ia]:e.nodeName.includes("-"),[ua]:e.namespaceURI===Oe}}function va(e,r,a=r){var f=Re(),s=new WeakSet;Ve(e,"input",i=>{var l=i?e.defaultValue:e.value;if(l=z(e)?J(l):l,a(l),I!==null&&s.add(I),f&&l!==(l=r())){var _=e.selectionStart,b=e.selectionEnd;e.value=l??"",b!==null&&(e.selectionStart=_,e.selectionEnd=Math.min(b,e.value.length))}}),(N&&e.defaultValue!==e.value||O(r)==null&&e.value)&&(a(z(e)?J(e.value):e.value),I!==null&&s.add(I)),qe(()=>{var i=r();if(e===document.activeElement){var l=Be??I;if(s.has(l))return}z(e)&&i===J(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function z(e){var r=e.type;return r==="number"||r==="range"}function J(e){return e===""?null:+e}function ca(e){return function(...r){var a=r[0];return a.preventDefault(),e?.apply(this,r)}}var da=F('<p class="text-gray-500">No todos yet!</p>'),_a=F('<li class="flex justify-between items-center p-2 border rounded"><label class="flex items-center gap-2"><input type="checkbox"/> <span> </span></label> <button class="text-red-500">âœ•</button></li>'),ha=F('<ul class="space-y-2"></ul>'),ma=F('<form class="flex gap-2 mb-4"><input placeholder="Add a new task..." class="flex-1 border p-2 rounded"/> <button class="bg-blue-500 text-white px-4 py-2 rounded">Add</button></form> <!>',1);function Aa(e,r){Fe(r,!1);const a=B();let f=B([]),s=B(""),i=Je(r,"filter",8,"all");async function l(){try{q(f,await ea())}catch(t){console.error("Failed to load todos",t)}}async function _(){if(!p(s).trim())return;const t={text:p(s).trim(),completed:!1};await aa(t),q(s,""),await l()}async function b(t){await ra(t),await l()}async function h(t){await ta(t),await l()}oe(()=>{l(),je(l)}),Ue(()=>(p(f),Pe(i())),()=>{q(a,p(f).filter(t=>i()==="active"?!t.completed:i()==="completed"?t.completed:!0))}),Ye(),$e();var g=ma(),w=Ge(g),n=V(w);j(n),Xe(2),H(w);var d=P(w,2);{var o=t=>{var T=da();R(t,T)},v=t=>{var T=ha();na(T,5,()=>p(a),la,(A,u)=>{var m=_a(),c=V(m),y=V(c);j(y);var x=P(y,2),k=V(x,!0);H(x),H(c);var E=P(c,2);H(m),ze(()=>{oa(y,(p(u),O(()=>p(u).completed))),Qe(x,1,Ze((p(u),O(()=>p(u).completed?"line-through text-gray-500":"")))),ve(k,(p(u),O(()=>p(u).text)))}),U("change",y,()=>b(p(u))),U("click",E,()=>h(p(u))),R(A,m)}),H(T),R(t,T)};We(d,t=>{p(a),O(()=>p(a).length===0)?t(o):t(v,!1)})}va(n,()=>p(s),t=>q(s,t)),U("submit",w,ca(_)),R(e,g),Ke()}export{Aa as T};
