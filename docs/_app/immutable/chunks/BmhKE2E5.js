import"./DsnmJJEf.js";import"./Bowe9pbV.js";import{o as ie,e as Y,s as ue}from"./BLCRTXji.js";import{G as q,B as I,a6 as oe,J as ee,C as ve,A as de,g as p,X as ce,D as _e,H as he,F as Z,I as z,P as H,a7 as me,a8 as pe,K as W,M as be,L as N,a9 as ae,aa as ge,m as B,ab as $,ac as xe,N as re,O as we,ad as ye,ae as G,af as te,ag as Te,ah as Ee,ai as Ae,aj as Me,ak as De,al as Ie,V as Ne,am as Ce,an as ke,u as O,ao as Se,ap as He,p as Re,l as Oe,e as Ve,f as X,z as Le,a as V,i as Fe,c as L,b as F,w as Be,a4 as Xe,r as R,s as J,h as Ye}from"./BTGYbljv.js";import{p as qe,i as ze}from"./DaA0yNEH.js";import{r as j,s as Ge,a as Je,c as Ke}from"./ZS5GYGfs.js";import{i as Pe}from"./B2pqeNjr.js";import{w as Ue,g as We,a as Qe,t as Ze,d as $e}from"./DD1q5Blc.js";function je(e,r){return r}function ea(e,r,a){for(var o=e.items,i=[],n=r.length,l=0;l<n;l++)Me(r[l].e,i,!0);var _=n>0&&i.length===0&&a!==null;if(_){var b=a.parentNode;De(b),b.append(a),o.clear(),M(e,r[0].prev,r[n-1].next)}Ie(i,()=>{for(var h=0;h<n;h++){var g=r[h];_||(o.delete(g.k),M(e,g.prev,g.next)),te(g.e,!_)}})}function aa(e,r,a,o,i,n=null){var l=e,_={flags:r,items:new Map,first:null};{var b=e;l=I?q(oe(b)):b.appendChild(ee())}I&&ve();var h=null,g=!1,E=new Map,s=ce(()=>{var t=a();return ge(t)?t:t==null?[]:ae(t)}),c,u;function v(){ra(u,c,_,E,l,i,r,o,a),n!==null&&(c.length===0?h?re(h):h=W(()=>n(l)):h!==null&&we(h,()=>{h=null}))}de(()=>{u??=Ne,c=p(s);var t=c.length;if(g&&t===0)return;g=t===0;let x=!1;if(I){var A=_e(l)===he;A!==(t===0)&&(l=Z(),q(l),z(!1),x=!0)}if(I){for(var f=null,m,d=0;d<t;d++){if(H.nodeType===me&&H.data===pe){l=H,x=!0,z(!1);break}var w=c[d],y=o(w,d);m=Q(H,_,f,null,w,y,d,i,r,a),_.items.set(y,m),f=m}t>0&&q(Z())}if(I)t===0&&n&&(h=W(()=>n(l)));else if(be()){var D=new Set,T=N;for(d=0;d<t;d+=1){w=c[d],y=o(w,d);var C=_.items.get(y)??E.get(y);C?le(C,w,d):(m=Q(null,_,null,null,w,y,d,i,r,a,!0),E.set(y,m)),D.add(y)}for(const[k,S]of _.items)D.has(k)||T.skipped_effects.add(S.e);T.add_callback(v)}else v();x&&z(!0),p(s)}),I&&(l=H)}function ra(e,r,a,o,i,n,l,_,b){var h=r.length,g=a.items,E=a.first,s=E,c,u=null,v=[],t=[],x,A,f,m;for(m=0;m<h;m+=1){if(x=r[m],A=_(x,m),f=g.get(A),f===void 0){var d=o.get(A);if(d!==void 0){o.delete(A),g.set(A,d);var w=u?u.next:s;M(a,u,d),M(a,d,w),K(d,w,i),u=d}else{var y=s?s.e.nodes_start:i;u=Q(y,a,u,u===null?a.first:u.next,x,A,m,n,l,b)}g.set(A,u),v=[],t=[],s=u.next;continue}if(le(f,x,m),(f.e.f&G)!==0&&re(f.e),f!==s){if(c!==void 0&&c.has(f)){if(v.length<t.length){var D=t[0],T;u=D.prev;var C=v[0],k=v[v.length-1];for(T=0;T<v.length;T+=1)K(v[T],D,i);for(T=0;T<t.length;T+=1)c.delete(t[T]);M(a,C.prev,k.next),M(a,u,C),M(a,k,D),s=D,u=k,m-=1,v=[],t=[]}else c.delete(f),K(f,s,i),M(a,f.prev,f.next),M(a,f,u===null?a.first:u.next),M(a,u,f),u=f;continue}for(v=[],t=[];s!==null&&s.k!==A;)(s.e.f&G)===0&&(c??=new Set).add(s),t.push(s),s=s.next;if(s===null)continue;f=s}v.push(f),u=f,s=f.next}if(s!==null||c!==void 0){for(var S=c===void 0?[]:ae(c);s!==null;)(s.e.f&G)===0&&S.push(s),s=s.next;var se=S.length;if(se>0){var ne=h===0?i:null;ea(a,S,ne)}}e.first=a.first&&a.first.e,e.last=u&&u.e;for(var fe of o.values())te(fe.e);o.clear()}function le(e,r,a,o){xe(e.v,r),e.i=a}function Q(e,r,a,o,i,n,l,_,b,h,g){var E=(b&Te)!==0,s=(b&Ee)===0,c=E?s?B(i,!1,!1):$(i):i,u=(b&ye)===0?l:$(l),v={i:u,v:c,k:n,a:null,e:null,prev:a,next:o};try{if(e===null){var t=document.createDocumentFragment();t.append(e=ee())}return v.e=W(()=>_(e,c,u,h),I),v.e.prev=a&&a.e,v.e.next=o&&o.e,a===null?g||(r.first=v):(a.next=v,a.e.next=v.e),o!==null&&(o.prev=v,o.e.prev=v.e),v}finally{}}function K(e,r,a){for(var o=e.next?e.next.e.nodes_start:a,i=r?r.e.nodes_start:a,n=e.e.nodes_start;n!==null&&n!==o;){var l=Ae(n);i.before(n),n=l}}function M(e,r,a){r===null?e.first=a:(r.next=a,r.e.next=a&&a.e),a!==null&&(a.prev=r,a.e.prev=r&&r.e)}function ta(e,r,a=r){var o=Ce(),i=new WeakSet;ke(e,"input",n=>{var l=n?e.defaultValue:e.value;if(l=P(e)?U(l):l,a(l),N!==null&&i.add(N),o&&l!==(l=r())){var _=e.selectionStart,b=e.selectionEnd;e.value=l??"",b!==null&&(e.selectionStart=_,e.selectionEnd=Math.min(b,e.value.length))}}),(I&&e.defaultValue!==e.value||O(r)==null&&e.value)&&(a(P(e)?U(e.value):e.value),N!==null&&i.add(N)),Se(()=>{var n=r();if(e===document.activeElement){var l=He??N;if(i.has(l))return}P(e)&&n===U(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function P(e){var r=e.type;return r==="number"||r==="range"}function U(e){return e===""?null:+e}function la(e){return function(...r){var a=r[0];return a.preventDefault(),e?.apply(this,r)}}var sa=X('<p class="text-gray-500">No todos yet!</p>'),na=X('<li class="flex justify-between items-center p-2 border rounded"><label class="flex items-center gap-2"><input type="checkbox"/> <span> </span></label> <button class="text-red-500">âœ•</button></li>'),fa=X('<ul class="space-y-2"></ul>'),ia=X('<form class="flex gap-2 mb-4"><input placeholder="Add a new task..." class="flex-1 border p-2 rounded"/> <button class="bg-blue-500 text-white px-4 py-2 rounded">Add</button></form> <!>',1);function pa(e,r){Re(r,!1);const a=B();let o=B([]),i=B(""),n=qe(r,"filter",8,"all");async function l(){try{F(o,await We())}catch(t){console.error("Failed to load todos",t)}}async function _(){if(!p(i).trim())return;const t={text:p(i).trim(),completed:!1};await Qe(t),F(i,""),await l()}async function b(t){await Ze(t),await l()}async function h(t){await $e(t),await l()}ie(()=>{l(),Ue(l)}),Oe(()=>(p(o),Be(n())),()=>{F(a,p(o).filter(t=>n()==="active"?!t.completed:n()==="completed"?t.completed:!0))}),Ve(),Pe();var g=ia(),E=Le(g),s=L(E);j(s),Xe(2),R(E);var c=J(E,2);{var u=t=>{var x=sa();V(t,x)},v=t=>{var x=fa();aa(x,5,()=>p(a),je,(A,f)=>{var m=na(),d=L(m),w=L(d);j(w);var y=J(w,2),D=L(y,!0);R(y),R(d);var T=J(d,2);R(m),Ye(()=>{Ge(w,(p(f),O(()=>p(f).completed))),Je(y,1,Ke((p(f),O(()=>p(f).completed?"line-through text-gray-500":"")))),ue(D,(p(f),O(()=>p(f).text)))}),Y("change",w,()=>b(p(f))),Y("click",T,()=>h(p(f))),V(A,m)}),R(x),V(t,x)};ze(c,t=>{p(a),O(()=>p(a).length===0)?t(u):t(v,!1)})}ta(s,()=>p(i),t=>F(i,t)),Y("submit",E,la(_)),V(e,g),Fe()}export{pa as T};
